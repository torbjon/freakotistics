<div id="sidebar">
  <div class="header">
    Data: <a href="http://data.csb.gov.lv/">data.csb.gov.lv</a>
    <br>
    Source: <a href="http://github.com/torbjon/freakotistics/">github.com/torbjon/freakotistics</a>
  </div>

  <% @data['charts'].each_with_index do |title, index| %>
    <label>
      <input type="checkbox" name="chart" value="<%= index %>" <%= checked?(index) %>> <%= title['title'] %>
    </label>
  <% end %>
</div>
<div id="container"></div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/js/highcharts.js"></script>
<script type="text/javascript">
$(function () {
  $('#container').highcharts({
    chart: {
      zoomType: 'xy'
    },
    title: {
      text: '<%= @chart1_data["title"] %> - <%= @chart2_data["title"] %>'
    },
    xAxis: [{
      categories: ['91', '92', '93', '94', '95', '96', '97', '98', '99', '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11']
    }],
    yAxis: [{
      title: {
        text: '<%= @chart2_data["title"] %>',
        style: { color: '#2ECC71' }
      },
      opposite: true
    }, {
      title: {
        text: '<%= @chart1_data["title"] %>',
        style: { color: '#3498DB' }
      }
    }],
    tooltip: {
      shared: true
    },
    series: [{
      name: '<%= @chart1_data["title"] %>',
      color: '#3498DB',
      type: 'column',
      yAxis: 1,
      data: [<%= @chart1_data["data"] %>],
      tooltip: {
        valueSuffix: '<%= @chart1_data["suffix"] %>'
      }
    }, {
      name: '<%= @chart2_data["title"] %>',
      color: '#2ECC71',
      type: 'spline',
      data: [<%= @chart2_data["data"] %>],
      tooltip: {
        valueSuffix: '<%= @chart2_data["suffix"] %>'
      }
    }]
  });
});
</script>
<script src="/js/plugins.js"></script>
<script src="/js/main.js"></script>

<script>
  var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src='http://www.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
